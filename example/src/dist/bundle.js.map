{"version":3,"sources":["webpack:///webpack/bootstrap 3cd771888f3be24a8b8a","webpack:///./example/src/app.js","webpack:///./PID.js"],"names":["dt","T","samples","Math","floor","t","y","x","c","input","state","f1","u","simulate","P","Number","$","val","I","D","C","i","push","control","numeric","dopri","at","console","log","Highcharts","chart","title","text","yAxis","xAxis","categories","legend","layout","align","verticalAlign","series","data","transpose","on","PIDcontroller","ie","pe","de","control_effort","prev_error","setpoint","time"],"mappings":"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","file":"bundle.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, {\n \t\t\t\tconfigurable: false,\n \t\t\t\tenumerable: true,\n \t\t\t\tget: getter\n \t\t\t});\n \t\t}\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 0);\n\n\n\n// WEBPACK FOOTER //\n// webpack/bootstrap 3cd771888f3be24a8b8a","\r\nimport PID from '../../PID'\r\n\r\nconst dt    =   0.001;\r\nconst T     =   10;\r\n\r\nlet samples =   Math.floor(T/dt);\r\nlet t       =   [];\r\nlet y       =   [];\r\nlet x       =   [];\r\nlet c       =   [];\r\nlet input   =   1;\r\nlet state   =   [0,0];\r\n\r\nfunction f1(t, y,u) {\r\n    return [y[1],\r\n    -y[1]-y[0]+u];\r\n}\r\n\r\nfunction simulate(){\r\n\r\n\r\n    let P = Number($(\"#P\").val());\r\n    let I = Number($(\"#I\").val());\r\n    let D = Number($(\"#D\").val());\r\n    let  C = new PID({P:P, I:I, D:D,dt:dt});\r\n\r\n    for(var i=0; i <samples;i++){\r\n        t.push(i * dt);\r\n        x.push(input);\r\n        c = C.control(state[0], input, t[i]);\r\n        y.push(numeric.dopri(0, dt, state, function(t,y){\r\n        return f1(t,y,c)}, 1e-12, 1000).at(dt));\r\n        state= y[i];\r\n        console.log(state)\r\n    }\r\n\r\n    Highcharts.chart('chart-output', {\r\n\r\n        title: {\r\n            text: 'System output'\r\n        },\r\n\r\n        yAxis: {\r\n            title: {\r\n                text: 'Output'\r\n            }\r\n        },\r\n        xAxis: {\r\n            title: {\r\n                text: 'Time [s]'\r\n            },\r\n            categories: t\r\n        },\r\n\r\n        legend: {\r\n            layout: 'vertical',\r\n            align: 'right',\r\n            verticalAlign: 'middle'\r\n        },\r\n\r\n        series: [{\r\n            data: numeric.transpose(y)[0]\r\n        },{\r\n            data: x\r\n        }]\r\n\r\n    });\r\n}\r\n\r\n$('#startSim').on('click', function () {\r\n    simulate();\r\n})\n\n\n// WEBPACK FOOTER //\n// ./example/src/app.js","\r\n // ES6\r\n\r\n class PIDcontroller {\r\n\r\n  constructor ({P = 1, I = 0, D = 0, dt = 1} = {}) {\r\n    this.P = P;\r\n    this.I = I;\r\n    this.D = D;\r\n    this.dt = dt;\r\n    this.T = 0;\r\n    this.ie = 0;\r\n    this.pe=0;\r\n    this.de=0;\r\n    this.control_effort = 0;\r\n    this.prev_error = 0;\r\n  }\r\n\r\n  control (state, setpoint, time) {\r\n        this.pe = setpoint - state;\r\n        this.de = (this.pe - this.prev_error) / (this.dt);\r\n        this.ie = this.ie + (this.dt) * this.pe;\r\n        var control = this.P * this.pe + this.I * this.ie + this.D * this.de;\r\n        this.prev_error = this.pe;\r\n        return control;\r\n  }\r\n}\r\n\r\nexport default PIDcontroller;\n\n\n// WEBPACK FOOTER //\n// ./PID.js"],"sourceRoot":""}